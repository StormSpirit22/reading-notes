# 17 垃圾回收

## 17.1 概述

Go GC 的基本特征是“非分代、非紧缩、写屏障、并发标记清理”。

### 三色标记和写屏障

这是让标记和用户代码并发的基本保障，基本原理：

- 起初所有对象都是白色。
- 扫描找出所有可达对象，标记为灰色， 放入待处理队列。
- 从队列提取灰色对象，将其引用对象标记为灰色放入队列，自身标记为黑色。
- 写屏障监视对象内存修改，重新标色或放回队列。

当完成全部扫描后，剩余的对象不是白色就是黑色，清理操作只需将白色对象内存回收即可。

